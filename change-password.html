<!DOCTYPE html>
<html>
<body>
<h2>Change Password</h2>
<input id="newPass" type="password">
<button onclick="update()">Update</button>

<script type="module">
import { auth, db } from "./firebase.js";
import { updatePassword }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, updateDoc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

window.update = async ()=>{
  await updatePassword(auth.currentUser,newPass.value);
  await updateDoc(doc(db,"users",auth.currentUser.uid),{
    mustChangePassword:false
  });
  location.href="dashboard-editor.html";
};
</script>
</body>
</html>
